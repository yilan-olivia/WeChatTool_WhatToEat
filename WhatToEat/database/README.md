# 数据库设计文档

本文档说明「家庭菜品管理与智能食谱」小程序的数据库设计。

## 快速开始

1. **创建集合**：在小程序后台创建以下5个集合
   - `food_items` - 菜品表
   - `users` - 用户表
   - `recipes` - 食谱表
   - `community_posts` - 社区动态表
   - `health_reports` - 健康报告表

2. **配置安全规则**：参考 `security-rules.md` 配置每个集合的安全规则

3. **创建索引**：参考 `indexes.md` 创建必要的索引

4. **初始化数据**（可选）：运行 `init-data.js` 插入示例数据

## 文档说明

- `schemas.md` - 完整的集合结构定义
- `security-rules.json` - 安全规则配置（JSON格式）
- `security-rules.md` - 安全规则配置说明
- `indexes.md` - 索引优化文档
- `init-data.js` - 数据库初始化脚本

## 重要提示

1. **软删除机制**：所有集合都使用 `isDeleted` 字段实现软删除，查询时务必过滤已删除数据
2. **用户隔离**：所有用户数据都通过 `userId` 字段隔离，确保数据安全
3. **索引优化**：根据实际查询需求创建索引，避免过多索引影响性能
4. **安全规则**：务必配置安全规则，防止数据泄露
