<!-- 菜品管理页 -->
<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <input 
      class="search-input" 
      placeholder="搜索菜品名称..." 
      value="{{searchKeyword}}"
      bindinput="onSearchInput"
      confirm-type="search"
      bindconfirm="onSearch"
    />
    <view class="search-btn" bindtap="onSearch">搜索</view>
  </view>

  <!-- 分类筛选 -->
  <scroll-view class="category-scroll" scroll-x>
    <view class="category-list">
      <view 
        class="category-item {{currentCategory === item ? 'active' : ''}}"
        wx:for="{{categories}}" 
        wx:key="*this"
        bindtap="onCategoryChange"
        data-category="{{item}}"
      >
        {{item}}
      </view>
    </view>
  </scroll-view>

  <!-- 菜品列表 -->
  <scroll-view 
    class="foods-scroll" 
    scroll-y 
    refresher-enabled="{{true}}"
    refresher-triggered="{{refreshing}}"
    bindrefresherrefresh="onRefresh"
    bindscrolltolower="onLoadMore"
  >
    <view class="foods-list" wx:if="{{foods.length > 0}}">
      <food-card 
        wx:for="{{foods}}" 
        wx:key="id"
        food="{{item}}"
        bindtap="onFoodTap"
        bindlongpress="onFoodLongPress"
      ></food-card>
    </view>
    <empty wx:else text="暂无菜品" show-action="{{true}}">
      <view slot="action">
        <button class="btn btn-primary" bindtap="navigateToFoodEdit">添加菜品</button>
      </view>
    </empty>
    
    <!-- 加载更多组件 -->
    <loading-more 
      show="{{foods.length > 0}}"
      loading="{{loadingMore}}"
      loading-text="加载中..."
      no-more-text="没有更多了"
    ></loading-more>
  </scroll-view>

  <!-- 添加按钮 -->
  <view class="fab" bindtap="navigateToFoodEdit">
    <text class="fab-icon">+</text>
  </view>
</view>

<!-- 加载组件 -->
<loading show="{{loading}}" text="加载中..."></loading>