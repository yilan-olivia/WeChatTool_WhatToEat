<!-- é£Ÿè°±è¯¦æƒ…é¡µ -->
<view class="container">
  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading}}" class="loading-container">
    <loading show="{{loading}}" text="åŠ è½½ä¸­..."></loading>
  </view>

  <!-- é£Ÿè°±å†…å®¹ -->
  <view wx:elif="{{recipe}}" class="recipe-container">
    <!-- æ ‡é¢˜ -->
    <view class="header-section">
      <text class="recipe-title">{{recipe.title}}</text>
      <view class="recipe-meta">
        <text class="recipe-tag" wx:if="{{recipe.typeValue}}">{{recipe.typeValue}}</text>
        <text class="recipe-time">{{recipe.createTime}}</text>
      </view>
    </view>

    <!-- å›¾ç‰‡å±•ç¤º -->
    <view class="images-section" wx:if="{{recipe.images && recipe.images.length > 0}}">
      <scroll-view class="images-scroll" scroll-x>
        <view class="images-list">
          <image 
            class="recipe-image" 
            wx:for="{{recipe.images}}" 
            wx:key="index"
            wx:for-item="img"
            src="{{img}}" 
            mode="aspectFill"
            bindtap="previewImage"
            data-index="{{index}}"
          ></image>
        </view>
      </scroll-view>
    </view>

    <!-- å†…å®¹ -->
    <view class="content-section">
      <text class="recipe-content">{{recipe.content}}</text>
    </view>

    <!-- æ“ä½œæ  -->
    <view class="actions-section">
      <view class="action-btn" bindtap="onLike">
        <text class="action-icon {{isLiked ? 'liked' : ''}}">ğŸ‘</text>
        <text class="action-text">{{recipe.likeCount || 0}}</text>
      </view>
      <view class="action-btn" bindtap="onCollect">
        <text class="action-icon {{isCollected ? 'collected' : ''}}">â­</text>
        <text class="action-text">æ”¶è—</text>
      </view>
      <view class="action-btn delete-btn" wx:if="{{isAuthor}}" bindtap="onDelete">
        <text class="action-icon">ğŸ—‘ï¸</text>
        <text class="action-text">åˆ é™¤</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½å¤±è´¥ -->
  <view wx:else class="error-container">
    <text class="error-text">åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•</text>
    <button class="retry-btn" bindtap="retryLoad">é‡è¯•</button>
  </view>
</view>
